import React, { useState, useEffect } from "react";
import axios from "axios";
import { jwtDecode as jwt_decode } from "jwt-decode";
import NavBar from "../components/NavBar";
import ChallengeBox from "../components/ChallengeBox";
import PointsButton from "../components/PointsButton";
function Account() {
  const [userDetails, setUserDetails] = useState({});
  const token = localStorage.getItem("token");
  const userId = token ? jwt_decode(token).userId : null;

  useEffect(() => {
    const fetchUserDetails = async () => {
      if (!userId) return;

      try {
        const { data } = await axios.get(
          `http://localhost:5000/userdetails/${userId}`,
          {
            headers: {
              Authorization: `Bearer ${token}`,
            },
          }
        );
        setUserDetails(data);
      } catch (error) {
        console.error("Error fetching user details:", error);
      }
    };

    fetchUserDetails();
  }, [userId]);

  return (
    <>
      <header className="top-container">
        <div className="logo-points">
          <h2 className="logo">Splash</h2>
          <div className="settings-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M4.40275 11.6221C5.51875 12.0051 6.40775 12.9391 6.77975 14.1231L6.81975 14.2431C7.24575 15.4991 7.07275 16.8511 6.35875 17.8651C6.22875 18.0491 6.25775 18.2691 6.39475 18.3731L8.46675 19.9471C8.53975 20.0021 8.61075 20.0021 8.65475 19.9971C8.70475 19.9891 8.77775 19.9621 8.83675 19.8781L9.06775 19.5501C9.75675 18.5731 10.8667 17.9701 12.0387 17.9361C13.3547 17.9091 14.5367 18.5121 15.2727 19.5751L15.3907 19.7461C15.4497 19.8301 15.5217 19.8581 15.5727 19.8661C15.6167 19.8751 15.6887 19.8721 15.7607 19.8161L17.8217 18.2611C17.9657 18.1531 17.9977 17.9221 17.8907 17.7671L17.6307 17.3921C16.9607 16.4241 16.7617 15.1681 17.0987 14.0331C17.4647 12.7971 18.3957 11.8191 19.5907 11.4191L19.7917 11.3511C19.9527 11.2981 20.0397 11.0981 19.9827 10.9141L19.1957 8.39312C19.1587 8.27512 19.0827 8.22212 19.0407 8.20012C18.9807 8.16912 18.9157 8.16412 18.8537 8.18512L18.5137 8.29812C17.3507 8.68512 16.0677 8.47512 15.0827 7.73412L14.9747 7.65312C14.0387 6.94912 13.4817 5.81412 13.4857 4.61812L13.4877 4.33812C13.4877 4.20512 13.4247 4.12212 13.3867 4.08412C13.3507 4.04712 13.2897 4.00312 13.2037 4.00312L10.6567 4.00012C10.5007 4.00012 10.3737 4.14912 10.3727 4.33312L10.3717 4.57512C10.3667 5.79012 9.79775 6.94612 8.84975 7.66912L8.72075 7.76712C7.67775 8.56012 6.31775 8.78412 5.08575 8.36412C5.03875 8.34812 4.99475 8.35112 4.95275 8.37312C4.92075 8.38912 4.86275 8.43012 4.83475 8.52112L4.01775 11.1171C3.95875 11.3061 4.05575 11.5031 4.23875 11.5661L4.40275 11.6221ZM8.61375 22.0001C8.12775 22.0001 7.65575 21.8421 7.25775 21.5391L5.18575 19.9661C4.19575 19.2161 3.97675 17.7731 4.69675 16.7501C5.07075 16.2201 5.14775 15.5391 4.92775 14.8931L4.87275 14.7251C4.68975 14.1431 4.27175 13.6911 3.75475 13.5141H3.75375L3.59075 13.4571C2.37275 13.0401 1.72275 11.7491 2.10975 10.5171L2.92575 7.92212C3.11075 7.33512 3.50975 6.86112 4.04975 6.58812C4.57775 6.32212 5.17475 6.28112 5.73275 6.47212C6.33175 6.67612 6.99675 6.56512 7.50975 6.17512L7.63875 6.07712C8.09475 5.72912 8.36975 5.16412 8.37175 4.56712L8.37275 4.32612C8.37775 3.04212 9.40275 2.00012 10.6557 2.00012H10.6597L13.2067 2.00312C13.8087 2.00412 14.3767 2.24212 14.8047 2.67312C15.2477 3.11812 15.4897 3.71312 15.4877 4.34812L15.4857 4.62712C15.4837 5.19312 15.7427 5.72812 16.1797 6.05612L16.2867 6.13712C16.7457 6.48212 17.3437 6.58112 17.8807 6.40112L18.2197 6.28812C18.7967 6.09612 19.4107 6.14312 19.9517 6.42012C20.5067 6.70412 20.9167 7.19312 21.1047 7.79812L21.8917 10.3191C22.2717 11.5371 21.6137 12.8511 20.4267 13.2481L20.2257 13.3151C19.6497 13.5091 19.1967 13.9891 19.0157 14.6011C18.8497 15.1621 18.9457 15.7791 19.2747 16.2531L19.5347 16.6281C20.2487 17.6601 20.0207 19.1081 19.0267 19.8571L16.9657 21.4131C16.4707 21.7871 15.8637 21.9381 15.2547 21.8411C14.6407 21.7421 14.1047 21.4021 13.7457 20.8841L13.6277 20.7121C13.2777 20.2081 12.7177 19.9021 12.1307 19.9351C11.5427 19.9511 11.0347 20.2301 10.7027 20.7021L10.4717 21.0301C10.1097 21.5431 9.57275 21.8781 8.96175 21.9741C8.84475 21.9921 8.72875 22.0001 8.61375 22.0001ZM11.9999 10.5C11.1729 10.5 10.4999 11.173 10.4999 12C10.4999 12.827 11.1729 13.5 11.9999 13.5C12.8269 13.5 13.4999 12.827 13.4999 12C13.4999 11.173 12.8269 10.5 11.9999 10.5ZM11.9999 15.5C10.0699 15.5 8.49995 13.93 8.49995 12C8.49995 10.07 10.0699 8.50002 11.9999 8.50002C13.9299 8.50002 15.4999 10.07 15.4999 12C15.4999 13.93 13.9299 15.5 11.9999 15.5Z"
                fill="black"
              />
              <g mask="url(#mask0_2742_1924)"></g>
            </svg>
          </div>
        </div>
        <div className="profile-user-box">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="39"
            viewBox="0 0 32 39"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M30.7265 22.953C30.7265 31.1492 24.0592 37.8166 15.8628 37.8166C12.4987 37.8166 9.39179 36.6943 6.89989 34.7995C3.31769 32.0844 1 27.785 1 22.953C1 19.546 3.47823 14.8233 8.36635 8.91446C11.9934 4.53467 15.6646 1.09689 15.7025 1.06385C15.7333 1.03509 15.769 1.01611 15.8067 1.00918C15.8251 1.00224 15.8441 1 15.8628 1C15.9197 1 15.9793 1.02101 16.0242 1.06385C16.0619 1.09689 19.7333 4.53467 23.3595 8.91446C28.2477 14.8233 30.7265 19.546 30.7265 22.953Z"
              fill="#456EFF"
              stroke="#456EFF"
            />
            <path
              d="M15.7263 37.8172C23.8473 37.8172 30.4533 31.4358 30.4533 23.5912C26.3067 27.6236 21.4279 27.9507 15.7267 23.5912C10.0255 19.2317 6.34344 23.4325 1 23.5912C1 28.216 3.29639 32.3309 6.84567 34.9295C9.31467 36.7431 12.393 37.8172 15.7263 37.8172Z"
              fill="#456EFF"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M30.7265 22.953C30.7265 31.1492 24.0592 37.8166 15.8628 37.8166C12.4987 37.8166 9.39179 36.6943 6.89989 34.7995C3.31769 32.0844 1 27.785 1 22.953C1 19.546 3.47823 14.8233 8.36635 8.91446C11.9934 4.53467 15.6646 1.09689 15.7025 1.06385C15.7333 1.03509 15.769 1.01611 15.8067 1.00918C15.8251 1.00224 15.8441 1 15.8628 1C15.9197 1 15.9793 1.02101 16.0242 1.06385C16.0619 1.09689 19.7333 4.53467 23.3595 8.91446C28.2477 14.8233 30.7265 19.546 30.7265 22.953Z"
              stroke="#456EFF"
            />
          </svg>
          <div className="profile-user">
            <h1 className="bold nomargin">John Doe</h1>
            <h2 Style="color: #456eff;" className="bold nomargin">
              200 points
            </h2>
          </div>
        </div>
      </header>
      {/* 
      <h2>Account Details</h2>
      <p>Email: {userDetails.email}</p>
      <p>Points: {userDetails.points}</p> */}

      <div className="profile-wrapper">
        <div className="challengeboxes">
          <ChallengeBox></ChallengeBox>
          {/* <ChallengeBox></ChallengeBox>
          <ChallengeBox></ChallengeBox> */}
        </div>

        <div className="infoboxes">
          <div className="infobox">
            <svg
              className="iconsbox"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M9.99989 0.357178C7.82417 0.357178 5.6956 0.471463 3.65703 0.685749C2.91957 0.757603 2.22728 1.07388 1.69019 1.58431C1.1531 2.09474 0.802017 2.77004 0.692742 3.50289C0.250486 6.60114 0.245677 9.74616 0.678456 12.8457C0.905599 14.4757 2.27274 15.6343 3.8456 15.7815L4.15703 15.81L4.47846 15.8386V18.93C4.47857 19.0491 4.50846 19.1663 4.56538 19.2708C4.62231 19.3754 4.70448 19.4641 4.80442 19.5288C4.90436 19.5936 5.0189 19.6323 5.13761 19.6415C5.25633 19.6507 5.37546 19.63 5.48417 19.5815C7.49131 18.6815 8.7056 17.8072 10.1699 16.1672C12.2008 16.1555 14.2299 16.0439 16.2499 15.8329C17.0091 15.7592 17.7217 15.433 18.2736 14.9065C18.8255 14.38 19.1849 13.6835 19.2942 12.9286C19.5196 11.3835 19.6361 9.82438 19.6427 8.26289C19.6427 6.64861 19.5185 5.06575 19.3013 3.54718C19.1919 2.80418 18.8369 2.11918 18.293 1.60137C17.749 1.08356 17.0474 0.762739 16.2999 0.690035C14.207 0.470556 12.1042 0.359456 9.99989 0.357178ZM10.2442 4.88146C10.0636 4.84921 9.87821 4.85649 9.70074 4.9028C9.52327 4.94912 9.35795 5.03337 9.21619 5.14974C9.07442 5.26612 8.95957 5.41185 8.87956 5.57689C8.79955 5.74194 8.75629 5.92237 8.75274 6.10575C8.75274 6.34255 8.65867 6.56965 8.49123 6.73709C8.32379 6.90454 8.09669 6.99861 7.85989 6.99861C7.62308 6.99861 7.39598 6.90454 7.22854 6.73709C7.0611 6.56965 6.96703 6.34255 6.96703 6.10575C6.96703 4.21289 8.73703 2.76146 10.5927 3.13003C11.7785 3.36575 12.7399 4.33003 12.9756 5.51289C13.0942 6.10861 13.0256 6.67432 12.767 7.18289C12.517 7.67432 12.1213 8.05003 11.6856 8.34003C11.2913 8.60432 11.0785 8.76003 10.9542 8.88861C10.9321 8.91164 10.9121 8.93649 10.8942 8.96289C10.8936 9.19969 10.799 9.42657 10.6311 9.59361C10.4633 9.76065 10.236 9.85417 9.99917 9.85361C9.76237 9.85304 9.5355 9.75842 9.36845 9.59058C9.20141 9.42273 9.10789 9.19541 9.10846 8.95861C9.10846 8.40146 9.35274 7.97861 9.66703 7.65146C9.94846 7.36003 10.3299 7.10003 10.6942 6.85575C10.9627 6.67575 11.1056 6.51146 11.1756 6.37289C11.2519 6.21355 11.2691 6.03231 11.2242 5.86146C11.1712 5.62172 11.0508 5.40211 10.8771 5.22849C10.7035 5.05487 10.4839 4.93447 10.2442 4.88146ZM10.8927 12.2286C10.8927 11.9918 10.7987 11.7647 10.6312 11.5973C10.4638 11.4298 10.2367 11.3357 9.99989 11.3357C9.76309 11.3357 9.53598 11.4298 9.36854 11.5973C9.2011 11.7647 9.10703 11.9918 9.10703 12.2286V12.6215C9.10703 12.8583 9.2011 13.0854 9.36854 13.2528C9.53598 13.4203 9.76309 13.5143 9.99989 13.5143C10.2367 13.5143 10.4638 13.4203 10.6312 13.2528C10.7987 13.0854 10.8927 12.8583 10.8927 12.6215V12.2286Z"
                fill="#456EFF"
              />
            </svg>
            <div>
              <h2 className="bold nomargin">10 questions</h2>
              <p className="nomargin">answered</p>
            </div>
          </div>
          <div className="infobox">
            <svg
              className="iconsbox"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M10 20C16.4 20 20 16.4 20 10C20 3.6 16.4 0 10 0C3.6 0 0 3.6 0 10C0 16.4 3.6 20 10 20ZM15.1957 16.47C14.6919 15.5304 13.9425 14.7452 13.0275 14.198C12.1125 13.6508 11.0661 13.3622 10 13.3629C8.9342 13.3629 7.88835 13.6519 6.9737 14.199C6.05905 14.7461 5.30982 15.531 4.80571 16.47C5.99429 17.3243 7.68571 17.8571 10 17.8571C12.3143 17.8571 14.0057 17.3243 15.1957 16.47ZM13.3643 7.52714C13.3643 9.68 12.1529 10.8929 9.99857 10.8929C7.84571 10.8929 6.63429 9.68 6.63429 7.52714C6.63429 5.37286 7.84571 4.16143 9.99857 4.16143C12.1529 4.16143 13.3643 5.37286 13.3643 7.52714Z"
                fill="#456EFF"
              />
            </svg>
            <div>
              <h2 className="bold nomargin">1200 points</h2>
              <p className="nomargin">received total</p>
            </div>
          </div>
          <div className="infobox">
            <svg
              className="iconsbox"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M9.99989 0.357178C7.82417 0.357178 5.6956 0.471463 3.65703 0.685749C2.91957 0.757603 2.22728 1.07388 1.69019 1.58431C1.1531 2.09474 0.802017 2.77004 0.692742 3.50289C0.250486 6.60114 0.245677 9.74616 0.678456 12.8457C0.905599 14.4757 2.27274 15.6343 3.8456 15.7815L4.15703 15.81L4.47846 15.8386V18.93C4.47857 19.0491 4.50846 19.1663 4.56538 19.2708C4.62231 19.3754 4.70448 19.4641 4.80442 19.5288C4.90436 19.5936 5.0189 19.6323 5.13761 19.6415C5.25633 19.6507 5.37546 19.63 5.48417 19.5815C7.49131 18.6815 8.7056 17.8072 10.1699 16.1672C12.2008 16.1555 14.2299 16.0439 16.2499 15.8329C17.0091 15.7592 17.7217 15.433 18.2736 14.9065C18.8255 14.38 19.1849 13.6835 19.2942 12.9286C19.5196 11.3835 19.6361 9.82438 19.6427 8.26289C19.6427 6.64861 19.5185 5.06575 19.3013 3.54718C19.1919 2.80418 18.8369 2.11918 18.293 1.60137C17.749 1.08356 17.0474 0.762739 16.2999 0.690035C14.207 0.470556 12.1042 0.359456 9.99989 0.357178ZM10.2442 4.88146C10.0636 4.84921 9.87821 4.85649 9.70074 4.9028C9.52327 4.94912 9.35795 5.03337 9.21619 5.14974C9.07442 5.26612 8.95957 5.41185 8.87956 5.57689C8.79955 5.74194 8.75629 5.92237 8.75274 6.10575C8.75274 6.34255 8.65867 6.56965 8.49123 6.73709C8.32379 6.90454 8.09669 6.99861 7.85989 6.99861C7.62308 6.99861 7.39598 6.90454 7.22854 6.73709C7.0611 6.56965 6.96703 6.34255 6.96703 6.10575C6.96703 4.21289 8.73703 2.76146 10.5927 3.13003C11.7785 3.36575 12.7399 4.33003 12.9756 5.51289C13.0942 6.10861 13.0256 6.67432 12.767 7.18289C12.517 7.67432 12.1213 8.05003 11.6856 8.34003C11.2913 8.60432 11.0785 8.76003 10.9542 8.88861C10.9321 8.91164 10.9121 8.93649 10.8942 8.96289C10.8936 9.19969 10.799 9.42657 10.6311 9.59361C10.4633 9.76065 10.236 9.85417 9.99917 9.85361C9.76237 9.85304 9.5355 9.75842 9.36845 9.59058C9.20141 9.42273 9.10789 9.19541 9.10846 8.95861C9.10846 8.40146 9.35274 7.97861 9.66703 7.65146C9.94846 7.36003 10.3299 7.10003 10.6942 6.85575C10.9627 6.67575 11.1056 6.51146 11.1756 6.37289C11.2519 6.21355 11.2691 6.03231 11.2242 5.86146C11.1712 5.62172 11.0508 5.40211 10.8771 5.22849C10.7035 5.05487 10.4839 4.93447 10.2442 4.88146ZM10.8927 12.2286C10.8927 11.9918 10.7987 11.7647 10.6312 11.5973C10.4638 11.4298 10.2367 11.3357 9.99989 11.3357C9.76309 11.3357 9.53598 11.4298 9.36854 11.5973C9.2011 11.7647 9.10703 11.9918 9.10703 12.2286V12.6215C9.10703 12.8583 9.2011 13.0854 9.36854 13.2528C9.53598 13.4203 9.76309 13.5143 9.99989 13.5143C10.2367 13.5143 10.4638 13.4203 10.6312 13.2528C10.7987 13.0854 10.8927 12.8583 10.8927 12.6215V12.2286Z"
                fill="#456EFF"
              />
            </svg>
            <div>
              <h2 className="bold nomargin">12 years</h2>
              <p className="nomargin">active</p>
            </div>
          </div>
        </div>
      </div>

      <NavBar />
    </>
  );
}

export default Account;
